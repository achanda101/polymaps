if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(q){function ga(e){var h=e.indexOf(":");return h<0?e:{space:q.ns[e.substring(0,h)],local:e.substring(h+1)}}function T(){for(var e=0;e<T.maps.length;e++)T.maps[e].resize()}function X(e){return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function Y(e){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360))}function aa(e,h){if(e.row>h.row){var a=e;e=h;h=a}return{x0:e.column,y0:e.row,x1:h.column,y1:h.row,dx:h.column-e.column,dy:h.row-e.row}}function da(e,h,a,i,f){a=Math.max(a,Math.floor(h.y0));
i=Math.min(i,Math.ceil(h.y1));if(e.x0==h.x0&&e.y0==h.y0?e.x0+h.dy/e.dy*e.dx<h.x1:e.x1-h.dy/e.dy*e.dx<h.x0){var c=e;e=h;h=c}c=e.dx/e.dy;var d=h.dx/h.dy,l=e.dx>0,s=h.dx<0;for(a=a;a<i;a++){var o=c*Math.max(0,Math.min(e.dy,a+l-e.y0))+e.x0;f(Math.floor(d*Math.max(0,Math.min(h.dy,a+s-h.y0))+h.x0),Math.ceil(o),a)}}function ea(e,h,a,i,f,c){var d=aa(e,h);h=aa(h,a);e=aa(a,e);if(d.dy>h.dy){a=d;d=h;h=a}if(d.dy>e.dy){a=d;d=e;e=a}if(h.dy>e.dy){a=h;h=e;e=a}d.dy&&da(e,d,i,f,c);h.dy&&da(e,h,i,f,c)}q.version="2.5.1";
var $={x:0,y:0};q.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};q.id=function(){var e=0;return function(){return++e}}();q.svg=function(e){return document.createElementNS(q.ns.svg,e)};q.transform=function(e,h,a,i,f,c){var d={},l,s,o;if(!arguments.length){e=1;h=f=a=0;i=1;c=0}d.zoomFraction=function(m){if(!arguments.length)return s;s=m;l=Math.floor(s+Math.log(Math.sqrt(e*e+h*h+a*a+i*i))/Math.LN2);o=Math.pow(2,-l);return d};d.apply=function(m){var k=Math.pow(2,-m.zoom),r=
Math.pow(2,m.zoom-l);return{column:(e*m.column*k+a*m.row*k+f)*r,row:(h*m.column*k+i*m.row*k+c)*r,zoom:m.zoom-l}};d.unapply=function(m){var k=Math.pow(2,-m.zoom),r=Math.pow(2,m.zoom+l);return{column:(m.column*k*i-m.row*k*a-f*i+c*a)/(e*i-h*a)*r,row:(m.column*k*h-m.row*k*e-f*h+c*e)/(a*h-i*e)*r,zoom:m.zoom+l}};d.toString=function(){return"matrix("+[e*o,h*o,a*o,i*o].join(" ")+" 0 0)"};return d.zoomFraction(0)};q.cache=function(e,h){function a(k){m--;h&&h(k);delete d[k.key];if(k.next)k.next.prev=k.prev;
else if(s=k.prev)s.next=null;if(k.prev)k.prev.next=k.next;else if(l=k.next)l.prev=null}function i(){for(var k=s;m>o;k=k.prev){if(!k)break;k.lock||a(k)}}var f={},c={},d={},l=null,s=null,o=64,m=0;f.peek=function(k){return d[[k.zoom,k.column,k.row].join("/")]};f.load=function(k,r){var w=[k.zoom,k.column,k.row].join("/"),z=d[w];if(z){if(z.prev){if(z.prev.next=z.next)z.next.prev=z.prev;else s=z.prev;z.prev=null;z.next=l;l=l.prev=z}z.lock=1;return c[w]=z}z={key:w,column:k.column,row:k.row,zoom:k.zoom,next:l,
prev:null,lock:1};e.call(null,z,r);c[w]=d[w]=z;if(l)l.prev=z;else s=z;l=z;m++;return z};f.unload=function(k){if(!(k in c))return false;var r=c[k];r.lock=0;delete c[k];r.request&&r.request.abort(false)&&a(r);return r};f.locks=function(){return c};f.size=function(k){if(!arguments.length)return o;o=k;i();return f};f.flush=function(){i();return f};f.clear=function(){for(var k in d){var r=d[k];r.request&&r.request.abort(false);h&&h(d[k]);if(r.lock){r.lock=0;r.element.parentNode.removeChild(r.element)}}c=
{};d={};l=s=null;m=0;return f};return f};q.url=function(e){function h(f){var c=f.zoom<0?1:1<<f.zoom,d=f.column;if(i){d=f.column%c;if(d<0)d+=c}else if(d<0||d>=c)return null;return e.replace(/{(.)}/g,function(l,s){switch(s){case "S":return a[(Math.abs(f.zoom)+f.row+d)%a.length];case "Z":return f.zoom;case "X":return d;case "Y":return f.row;case "B":var o=q.map.coordinateLocation({row:f.row,column:d,zoom:f.zoom}),m=q.map.coordinateLocation({row:f.row+1,column:d+1,zoom:f.zoom}),k=Math.ceil(Math.log(f.zoom)/
Math.LN2);return m.lat.toFixed(k)+","+o.lon.toFixed(k)+","+o.lat.toFixed(k)+","+m.lon.toFixed(k)}return s})}var a=[],i=true;h.template=function(f){if(!arguments.length)return e;e=f;return h};h.hosts=function(f){if(!arguments.length)return a;a=f;return h};h.repeat=function(f){if(!arguments.length)return i;i=f;return h};return h};q.backwardsURL=function(e,h){function a(d,l){this.str=d;this.version=l}function i(d,l){var s=d.zoom<0?1:1<<d.zoom,o=d.column;if(c){o=d.column%s;if(o<0)o+=s}else if(o<0||o>=
s)return null;var m=0;s=e.replace(/\{(.)\}/g,function(k,r){var w=Math.pow(2,d.zoom),z=20-d.zoom,E=o-Math.floor(w/2);w=w-(d.row+Math.floor(w/2)+1);m=l!==undefined?l:h[z+"."+E+"."+w]||0;switch(r){case "S":return f[(Math.abs(d.zoom)+d.row+o)%f.length];case "Z":return z;case "X":return E;case "Y":return w;case "V":return m;case "B":z=q.map.coordinateLocation({row:d.row,column:o,zoom:d.zoom});E=q.map.coordinateLocation({row:d.row+1,column:o+1,zoom:d.zoom});w=Math.ceil(Math.log(d.zoom)/Math.LN2);return E.lat.toFixed(w)+
","+z.lon.toFixed(w)+","+z.lat.toFixed(w)+","+E.lon.toFixed(w)}return r});return new a(s,m)}var f=[],c=true;a.prototype.toString=function(){return this.str};i.template=function(d){if(!arguments.length)return e;e=d;return i};i.hosts=function(d){if(!arguments.length)return f;f=d;return i};i.repeat=function(d){if(!arguments.length)return c;c=d;return i};return i};q.dispatch=function(e){var h={};e.on=function(a,i){for(var f=h[a]||(h[a]=[]),c=0;c<f.length;c++)if(f[c].handler==i)return e;f.push({handler:i,
on:true});return e};e.off=function(a,i){var f=h[a];if(f)for(var c=0;c<f.length;c++){var d=f[c];if(d.handler==i){d.on=false;f.splice(c,1);break}}return e};return function(a){var i=h[a.type];if(i){i=i.slice();for(var f=0;f<i.length;f++){var c=i[f];c.on&&c.handler.call(e,a)}}}};q.queue=function(){function e(){if(!(f>=c||!i.length)){f++;i.pop()()}}function h(d){for(var l=0;l<i.length;l++)if(i[l]==d){i.splice(l,1);return true}return false}function a(d,l,s){function o(){m=new XMLHttpRequest;s&&m.overrideMimeType&&
m.overrideMimeType(s);m.open("GET",d,true);m.onreadystatechange=function(){if(m.readyState==4){f--;m.status<300&&l(m);e()}};m.send(null)}var m;i.push(o);e();return{abort:function(k){if(h(o))return true;if(k&&m){m.abort();return true}return false}}}var i=[],f=0,c=6;return{text:function(d,l,s){return a(d,function(o){o.responseText&&l(o.responseText)},s)},xml:function(d,l){return a(d,function(s){s.responseXML&&l(s.responseXML)},"application/xml")},json:function(d,l){return a(d,function(s){s.responseText&&
l(JSON.parse(s.responseText))},"application/json")},image:function(d,l,s){function o(){m=document.createElement("img");m.onerror=function(){f--;e()};m.onload=function(){f--;s(m);e()};m.src=l;d.setAttributeNS(q.ns.xlink,"href",l)}var m;i.push(o);e();return{abort:function(k){if(h(o))return true;if(k&&m){m.src="about:";return true}return false}}}}}();q.map=function(){function e(){if(r)if(o<r[0])o=r[0];else if(o>r[1])o=r[1];m=o-(o=Math.round(o));k=Math.pow(2,m)}function h(){if(t){var j=45/Math.pow(2,
o+m-3),v=Math.max(Math.abs(E*d.x+z*d.y),Math.abs(C*d.x+G*d.y)),u=X(L-v*j/l.y);v=X(n+v*j/l.y);s.lat=Math.max(u,Math.min(v,s.lat));u=Math.max(Math.abs(E*d.y+z*d.x),Math.abs(C*d.y+G*d.x));s.lon=Math.max(t[0].lon-u*j/l.x,Math.min(t[1].lon+u*j/l.x,s.lon))}}var a={},i,f,c=$,d=$,l={x:256,y:256},s={lat:37.76487,lon:-122.41948},o=12,m=0,k=1,r=[1,18],w=0,z=1,E=0,G=1,C=0,L=-180,n=180,t=[{lat:X(L),lon:-Infinity},{lat:X(n),lon:Infinity}];a.locationCoordinate=function(j){j=q.map.locationCoordinate(j);var v=Math.pow(2,
o);j.column*=v;j.row*=v;j.zoom+=o;return j};a.coordinateLocation=q.map.coordinateLocation;a.coordinatePoint=function(j,v){var u=Math.pow(2,o-v.zoom),D=Math.pow(2,o-j.zoom),x=(v.column*u-j.column*D)*l.x*k;u=(v.row*u-j.row*D)*l.y*k;return{x:d.x+z*x-E*u,y:d.y+E*x+z*u}};a.pointCoordinate=function(j,v){var u=Math.pow(2,o-j.zoom),D=(v.x-d.x)/k,x=(v.y-d.y)/k;return{column:j.column*u+(G*D-C*x)/l.x,row:j.row*u+(C*D+G*x)/l.y,zoom:o}};a.locationPoint=function(j){var v=Math.pow(2,o+m-3)/45,u=(j.lon-s.lon)*v*
l.x;j=(Y(s.lat)-Y(j.lat))*v*l.y;return{x:d.x+z*u-E*j,y:d.y+E*u+z*j}};a.pointLocation=function(j){var v=45/Math.pow(2,o+m-3),u=(j.x-d.x)*v;j=(j.y-d.y)*v;return{lon:s.lon+(G*u-C*j)/l.x,lat:X(Y(s.lat)-(C*u+G*j)/l.y)}};var A=q.svg("rect");A.setAttribute("visibility","hidden");A.setAttribute("pointer-events","all");a.container=function(j){if(!arguments.length)return i;i=j;i.setAttribute("class","map");i.appendChild(A);return a.resize()};a.focusableParent=function(){for(var j=i;j;j=j.parentNode)if(j.tabIndex>=
0)return j;return window};a.mouse=function(j){var v=(i.ownerSVGElement||i).createSVGPoint();if(ba<0&&(window.scrollX||window.scrollY)){var u=document.body.appendChild(q.svg("svg"));u.style.position="absolute";u.style.top=u.style.left="0px";var D=u.getScreenCTM();ba=!(D.f||D.e);document.body.removeChild(u)}if(ba){v.x=j.pageX;v.y=j.pageY}else{v.x=j.clientX;v.y=j.clientY}return v.matrixTransform(i.getScreenCTM().inverse())};a.size=function(j){if(!arguments.length)return c;f=j;return a.resize()};a.resize=
function(){if(f){c=f;T.remove(a)}else{A.setAttribute("width","100%");A.setAttribute("height","100%");b=A.getBBox();c={x:b.width,y:b.height};T.add(a)}A.setAttribute("width",c.x);A.setAttribute("height",c.y);d={x:c.x/2,y:c.y/2};h();a.dispatch({type:"resize"});return a};a.tileSize=function(j){if(!arguments.length)return l;l=j;a.dispatch({type:"move"});return a};a.center=function(j){if(!arguments.length)return s;s=j;h();a.dispatch({type:"move"});return a};a.panBy=function(j){var v=45/Math.pow(2,o+m-3),
u=j.x*v;j=j.y*v;return a.center({lon:s.lon+(C*j-G*u)/l.x,lat:X(Y(s.lat)+(C*u+G*j)/l.y)})};a.centerRange=function(j){if(!arguments.length)return t;if(t=j){L=t[0].lat>-90?Y(t[0].lat):-Infinity;n=t[0].lat<90?Y(t[1].lat):Infinity}else{L=-Infinity;n=Infinity}h();a.dispatch({type:"move"});return a};a.zoom=function(j){if(!arguments.length)return o+m;o=j;e();return a.center(s)};a.zoomBy=function(j,v,u){if(arguments.length<2)return a.zoom(o+m+j);if(arguments.length<3)u=a.pointLocation(v);o=o+m+j;e();var D=
a.locationPoint(u);return a.panBy({x:v.x-D.x,y:v.y-D.y})};a.zoomRange=function(j){if(!arguments.length)return r;r=j;return a.zoom(o+m)};a.extent=function(j){if(!arguments.length)return[a.pointLocation({x:0,y:c.y}),a.pointLocation({x:c.x,y:0})];var v=a.locationPoint(j[0]),u=a.locationPoint(j[1]),D=Math.max((u.x-v.x)/c.x,(v.y-u.y)/c.y);v=a.pointLocation({x:(v.x+u.x)/2,y:(v.y+u.y)/2});o=o+m-Math.log(D)/Math.LN2;e();return a.center(v)};a.angle=function(j){if(!arguments.length)return w;w=j;z=Math.cos(w);
E=Math.sin(w);G=Math.cos(-w);C=Math.sin(-w);h();a.dispatch({type:"move"});return a};a.add=function(j){j.map(a);return a};a.remove=function(j){j.map(null);return a};a.dispatch=q.dispatch(a);return a};T.maps=[];T.add=function(e){for(var h=0;h<T.maps.length;h++)if(T.maps[h]==e)return;T.maps.push(e)};T.remove=function(e){for(var h=0;h<T.maps.length;h++)if(T.maps[h]==e){T.maps.splice(h,1);return}};if(window.addEventListener){window.addEventListener("resize",T,false);window.addEventListener("load",T,false)}q.map.locationCoordinate=
function(e){var h=1/360;return{column:(e.lon+180)*h,row:(180-Y(e.lat))*h,zoom:0}};q.map.coordinateLocation=function(e){var h=45/Math.pow(2,e.zoom-3);return{lon:h*e.column-180,lat:X(180-h*e.row)}};var ba=/WebKit/.test(navigator.userAgent)?-1:0;q.layer=function(e,h){function a(C){for(var L=E[0].nextSibling;z<C;z++){r.insertBefore(E[-4],L);r.insertBefore(E[2],L);r.insertBefore(E[1],L);for(var n=E[-4],t=-4;t<2;)E[t]=E[++t];E[t]=n}}function i(C){for(var L=E[0].nextSibling;z>C;z--){r.insertBefore(E[-1],
L);r.insertBefore(E[2],E[-4]);for(var n=E[2],t=2;t>-4;)E[t]=E[--t];E[t]=n}}function f(){function C(P){var J=P.zoom,V=J<0?1:1<<J,W=P.column%V,B=P.row;if(W<0)W+=V;return{locationPoint:function(F){F=q.map.locationCoordinate(F);var I=Math.pow(2,J-F.zoom);return{x:u.x*(I*F.column-W),y:u.y*(I*F.row-B)}}}}function L(P,J,V){var W=K.zoom,B=2-U,F=4+U;for(P=P;P<J;P++){var I=d.load({column:P,row:V,zoom:W},C);if(!I.ready&&!(I.key in Q)){I.proxyRefs={};for(var M,O,R,S=1;S<=B;S++){O=true;for(var Z=0,fa=1<<S;Z<=
fa;Z++)for(var ca=0;ca<=fa;ca++)if((R=d.peek(M={column:(P<<S)+ca,row:(V<<S)+Z,zoom:W+S}))&&R.ready){Q[R.key]=d.load(M);R.proxyCount++;I.proxyRefs[R.key]=R}else O=false;if(O)break}if(!O)for(S=1;S<=F;S++)if((R=d.peek(M={column:P>>S,row:V>>S,zoom:W-S}))&&R.ready){Q[R.key]=d.load(M);R.proxyCount++;I.proxyRefs[R.key]=R;break}}Q[I.key]=I}}var n=c.map(),t=n.zoom(),A=t-(t=Math.round(t)),j=n.size(),v=n.angle(),u=n.tileSize(),D=n.locationCoordinate(n.center());if(z!=t){if(z<t)a(t);else if(z>t)i(t);else z=t;
for(var x=-4;x<=2;x++){var N=E[x];N.setAttribute("class","zoom"+(x<0?"":"+")+x+" zoom"+(t+x));N.setAttribute("transform","scale("+Math.pow(2,-x)+")")}}r.setAttribute("transform","translate("+j.x/2+","+j.y/2+")"+(v?"rotate("+v/Math.PI*180+")":"")+(A?"scale("+Math.pow(2,A)+")":"")+(w?w.zoomFraction(A):""));var K=n.pointCoordinate(D,$);x=n.pointCoordinate(D,{x:j.x,y:0});t=n.pointCoordinate(D,j);n=n.pointCoordinate(D,{x:0,y:j.y});if(!A&&!v&&!w){D.column=(Math.round(u.x*D.column)+(j.x&1)/2)/u.x;D.row=
(Math.round(u.y*D.row)+(j.y&1)/2)/u.y}if(w){K=w.unapply(K);x=w.unapply(x);t=w.unapply(t);n=w.unapply(n);D=w.unapply(D)}var U=o?o(K.zoom)-K.zoom:0;if(U){j=Math.pow(2,U);K.column*=j;K.row*=j;x.column*=j;x.row*=j;t.column*=j;t.row*=j;n.column*=j;n.row*=j;K.zoom=x.zoom=t.zoom=n.zoom+=U}A=d.locks();var Q={};for(var H in A)A[H].proxyCount=0;if(s&&U>-5&&U<3){v=K.zoom<0?1:1<<K.zoom;if(l){ea(K,x,t,0,v,L);ea(t,n,K,0,v,L)}else{j=Math.floor((K.column+t.column)/2);v=Math.max(0,Math.min(v-1,Math.floor((x.row+n.row)/
2)));x=Math.min(4,K.zoom);j=j>>x<<x;v=v>>x<<x;L(j,j+1,v)}}for(H in Q){x=Q[H];j=Math.pow(2,x.level=x.zoom-D.zoom);x.element.setAttribute("transform","translate("+(x.x=u.x*(x.column-D.column*j))+","+(x.y=u.y*(x.row-D.row*j))+")")}for(H in A)if(!(H in Q)){x=d.unload(H);x.element.parentNode.removeChild(x.element);delete x.proxyRefs}for(H in Q){x=Q[H];if(x.element.parentNode!=E[x.level]){E[x.level].appendChild(x.element);c.show&&c.show(x)}}d.flush();c.dispatch({type:"move"})}var c={},d=c.cache=q.cache(e,
h).size(512),l=true,s=true,o,m,k,r=q.svg("g"),w,z,E={};r.setAttribute("class","layer");for(var G=-4;G<=-1;G++)E[G]=r.appendChild(q.svg("g"));for(G=2;G>=1;G--)E[G]=r.appendChild(q.svg("g"));E[0]=r.appendChild(q.svg("g"));c.map=function(C){if(!arguments.length)return k;if(k){if(k==C){r.parentNode.appendChild(r);return c}k.off("move",f).off("resize",f);r.parentNode.removeChild(r)}if(k=C){k.container().appendChild(r);c.init&&c.init(r);k.on("move",f).on("resize",f);f()}return c};c.container=function(){return r};
c.levels=function(){return E};c.id=function(C){if(!arguments.length)return m;m=C;r.setAttribute("id",C);return c};c.visible=function(C){if(!arguments.length)return s;(s=C)?r.removeAttribute("visibility"):r.setAttribute("visibility","hidden");k&&f();return c};c.transform=function(C){if(!arguments.length)return w;w=C;k&&f();return c};c.zoom=function(C){if(!arguments.length)return o;o=typeof C=="function"||C==null?C:function(){return C};k&&f();return c};c.tile=function(C){if(!arguments.length)return l;
l=C;k&&f();return c};c.reload=function(){d.clear();k&&f();return c};c.dispatch=q.dispatch(c);c.on("load",function(C){if(C.tile.proxyRefs){for(var L in C.tile.proxyRefs){var n=C.tile.proxyRefs[L];--n.proxyCount<=0&&d.unload(L)&&n.element.parentNode.removeChild(n.element)}delete C.tile.proxyRefs}});return c};q.image=function(){var e=q.layer(function(a){var i=a.element=q.svg("image"),f=e.map().tileSize();i.setAttribute("preserveAspectRatio","none");i.setAttribute("width",f.x);i.setAttribute("height",
f.y);if(typeof h=="function"){i.setAttribute("opacity",0);f=h(a);if(f!=null)a.request=q.queue.image(i,f,function(c){delete a.request;a.ready=true;a.img=c;i.removeAttribute("opacity");e.dispatch({type:"load",tile:a})});else{a.ready=true;e.dispatch({type:"load",tile:a})}}else{a.ready=true;h!=null&&i.setAttributeNS(q.ns.xlink,"href",h);e.dispatch({type:"load",tile:a})}},function(a){a.request&&a.request.abort(true)}),h;e.url=function(a){if(!arguments.length)return h;h=typeof a=="string"&&/{.}/.test(a)?
q.url(a):a;return e.reload()};return e};q.backwardsImage=function(){var e=q.layer(function(a){if(a.column<0||a.column>=1<<a.zoom)a.element=q.svg("g");else{var i=a.element=q.svg("image"),f=e.map().tileSize();i.setAttribute("preserveAspectRatio","none");i.setAttribute("width",f.x);i.setAttribute("height",f.y);if(typeof h=="function"){i.setAttribute("opacity",0);var c=h(a);if(c!==null){a.request=q.queue.image(i,c.toString(),d);var d=function(l,s){if(l){if(c.version>0)a.request=q.queue.image(i,h(a,0).toString(),
d)}else{delete a.request;a.ready=true;a.img=s;i.removeAttribute("opacity");e.dispatch({type:"load",tile:a})}}}else{a.ready=true;e.dispatch({type:"load",tile:a})}}else{a.ready=true;h!==null&&i.setAttributeNS(q.ns.xlink,"href",h);e.dispatch({type:"load",tile:a})}}},function(a){a.request&&a.request.abort(true)}),h;e.url=function(a){if(!arguments.length)return h;h=typeof a=="string"&&/\{.\}/.test(a)?q.url(a):a;return e.reload()};return e};q.backwardsInfo=function(){function e(i){var f=Math.pow(2,20),
c=i[0]+Math.floor(f/2);y=f-(Math.floor(f/2)+i[1]);i=q.map.coordinateLocation({zoom:20,column:c,row:y});return[i.lat,i.lon]}var h=q.layer(function(i,f){if(i.column<0||i.column>=1<<i.zoom)i.element=q.svg("g");else{var c=i.element=q.svg("g"),d=h.map().tileSize();c.setAttribute("width",d.x);c.setAttribute("height",d.y);if(typeof a=="function"){var l=a(i);console.log(l);if(l!=null){i.request=q.queue.json(l.toString(),s);var s=function(o,m){if(o){if(l.version>0)i.request=q.queue.json(a(i,{}).toString(),
s)}else{var k=[];switch(m.type){case "FeatureCollection":for(var r=0;r<m.features.length;r++){var w=m.features[r],z;var E=w.geometry;z=f;var G=q.svg("path"),C=[];E=E.coordinates;for(var L=void 0,n=-1,t=void 0,A=E.length,j=void 0;++n<A;){L=E[n];t=-1;j=L.length-1;for(C.push("M");++t<j;)C.push((p=z(e(L[t]))).x,",",p.y,"L");C[C.length-1]="Z"}if(C.length){G.setAttribute("d",C.join(""));z=G}else z=void 0;z&&k.push({element:g.appendChild(z),data:w})}break;case "Feature":(z=geometry(m.geometry,f))&&k.push({element:g.appendChild(z),
data:m});break;default:(z=geometry(m,f))&&k.push({element:g.appendChild(z),data:{type:"Feature",geometry:m}});break}console.log(k);delete i.request;i.ready=true;h.dispatch({type:"load",tile:i})}}}else{i.ready=true;h.dispatch({type:"load",tile:i})}}else{i.ready=true;h.dispatch({type:"load",tile:i})}}},function(i){i.request&&i.request.abort(true)});h.container();var a;h.url=function(i){if(!arguments.length)return a;a=typeof i=="string"&&/{.}/.test(i)?q.url(i):i;return h.reload()};return h};q.geoJson=
function(e){function h(n){var t={lat:0,lon:0};return function(A){t.lat=A[1];t.lon=A[0];var j=n(t);A.x=j.x;A.y=j.y;return j}}function a(n,t){return n&&n.type in E&&E[n.type](n,t)}function i(n,t,A){return n.type in G&&G[n.type](n,t,A)}function f(){var n=c.map().zoom(),t=c.cache.locks(),A,j,v,u,D,x,N;if(w=="fixed")for(A in t){if((j=t[A]).scale!=n){N="scale("+Math.pow(2,j.zoom-n)+")";u=-1;for(D=(v=j.features).length;++u<D;)i((x=v[u]).data.geometry,x.element,N);j.scale=n}}else for(A in t){u=-1;for(D=(v=
(j=t[A]).features).length;++u<D;)i((x=v[u]).data.geometry,x.element,"");delete j.scale}}var c=q.layer(function(n,t){function A(v){var u=[];if(v.next)n.request=e(v.next.href,A);switch(v.type){case "FeatureCollection":for(var D=0;D<v.features.length;D++){var x=v.features[D],N=a(x.geometry,t);N&&u.push({element:j.appendChild(N),data:x})}break;case "Feature":(N=a(v.geometry,t))&&u.push({element:j.appendChild(N),data:v});break;default:(N=a(v,t))&&u.push({element:j.appendChild(N),data:{type:"Feature",geometry:v}});
break}n.ready=true;u.push.apply(n.features,u);c.dispatch({type:"load",tile:n,features:u})}var j=n.element=q.svg("g");n.features=[];t=h(t(n).locationPoint);if(l!=null)n.request=e(typeof l=="function"?l(n):l,A);else A({type:"FeatureCollection",features:z||[]})},function(n){n.request&&n.request.abort(true)}),d=c.container(),l,s=true,o="org.polymaps."+q.id(),m="url(#"+o+")",k=d.insertBefore(q.svg("clipPath"),d.firstChild),r=k.appendChild(q.svg("rect")),w="auto",z;d.setAttribute("fill-rule","evenodd");
k.setAttribute("id",o);if(!arguments.length)e=q.queue.json;var E={Point:function(n,t){var A=t(n.coordinates),j=q.svg("circle");j.setAttribute("r",4.5);j.setAttribute("transform","translate("+A.x+","+A.y+")");return j},MultiPoint:function(n,t){for(var A=q.svg("g"),j=n.coordinates,v,u,D=-1,x=j.length;++D<x;){u=A.appendChild(q.svg("circle"));u.setAttribute("r",4.5);u.setAttribute("transform","translate("+(v=t(j[D])).x+","+v.y+")")}return A},LineString:function(n,t){for(var A=q.svg("path"),j=["M"],v=
n.coordinates,u,D=-1,x=v.length;++D<x;)j.push((u=t(v[D])).x,",",u.y,"L");j.pop();if(j.length){A.setAttribute("d",j.join(""));return A}},MultiLineString:function(n,t){for(var A=q.svg("path"),j=[],v=n.coordinates,u,D=-1,x,N=v.length,K;++D<N;){u=v[D];x=-1;K=u.length;for(j.push("M");++x<K;)j.push((p=t(u[x])).x,",",p.y,"L");j.pop()}if(j.length){A.setAttribute("d",j.join(""));return A}},Polygon:function(n,t){for(var A=q.svg("path"),j=[],v=n.coordinates,u,D=-1,x,N=v.length,K;++D<N;){u=v[D];x=-1;K=u.length-
1;for(j.push("M");++x<K;)j.push((p=t(u[x])).x,",",p.y,"L");j[j.length-1]="Z"}if(j.length){A.setAttribute("d",j.join(""));return A}},MultiPolygon:function(n,t){for(var A=q.svg("path"),j=[],v=n.coordinates,u,D,x=-1,N,K,U=v.length,Q,H;++x<U;){u=v[x];N=-1;for(Q=u.length;++N<Q;){D=u[N];K=-1;H=D.length-1;for(j.push("M");++K<H;)j.push((p=t(D[K])).x,",",p.y,"L");j[j.length-1]="Z"}}if(j.length){A.setAttribute("d",j.join(""));return A}},GeometryCollection:function(n,t){for(var A=q.svg("g"),j=-1,v=n.geometries,
u=v.length,D;++j<u;)(D=a(v[j],t))&&A.appendChild(D);return A}},G={Point:function(n,t,A){n=n.coordinates;t.setAttribute("transform","translate("+n.x+","+n.y+")"+A)},MultiPoint:function(n,t,A){n=n.coordinates;var j=-1,v=u.length;t=t.firstChild;for(var u;++j<v;){u=n[j];t.setAttribute("transform","translate("+u.x+","+u.y+")"+A);t=t.nextSibling}}};c.url=function(n){if(!arguments.length)return l;l=typeof n=="string"&&/{.}/.test(n)?q.url(n):n;if(l!=null)z=null;typeof l=="string"&&c.tile(false);return c.reload()};
c.features=function(n){if(!arguments.length)return z;if(z=n){l=null;c.tile(false)}return c.reload()};c.clip=function(n){if(!arguments.length)return s;s&&d.removeChild(k);if(s=n)d.insertBefore(k,d.firstChild);var t=c.cache.locks();for(var A in t)s?t[A].element.setAttribute("clip-path",m):t[A].element.removeAttribute("clip-path");return c};var C=c.tile;c.tile=function(n){arguments.length&&!n&&c.clip(n);return C.apply(c,arguments)};var L=c.map;c.map=function(n){if(n&&r){var t=n.tileSize();r.setAttribute("width",
t.x);r.setAttribute("height",t.y)}return L.apply(c,arguments)};c.scale=function(n){if(!arguments.length)return w;(w=n)?c.on("move",f):c.off("move",f);c.map()&&f();return c};c.show=function(n){s?n.element.setAttribute("clip-path",m):n.element.removeAttribute("clip-path");c.dispatch({type:"show",tile:n,features:n.features});return c};c.reshow=function(){var n=c.cache.locks();for(var t in n)c.show(n[t]);return c};return c};q.dblclick=function(){function e(c){var d=i.zoom();d=c.shiftKey?Math.ceil(d)-
d-1:1-d+Math.floor(d);a==="mouse"?i.zoomBy(d,i.mouse(c)):i.zoomBy(d)}var h={},a="mouse",i,f;h.zoom=function(c){if(!arguments.length)return a;a=c;return h};h.map=function(c){if(!arguments.length)return i;if(i){f.removeEventListener("dblclick",e,false);f=null}if(i=c){f=i.container();f.addEventListener("dblclick",e,false)}return h};return h};q.drag=function(){function e(d){if(!d.shiftKey){c={x:d.clientX,y:d.clientY};i.focusableParent().focus();d.preventDefault();document.body.style.setProperty("cursor",
"move",null)}}function h(d){if(c){i.panBy({x:d.clientX-c.x,y:d.clientY-c.y});c.x=d.clientX;c.y=d.clientY}}var a={},i,f,c;a.map=function(d){if(!arguments.length)return i;if(i){f.removeEventListener("mousedown",e,false);f=null}if(i=d){f=i.container();f.addEventListener("mousedown",e,false)}return a};window.addEventListener("mousemove",h,false);window.addEventListener("mouseup",function(d){if(c){h(d);c=null;document.body.style.removeProperty("cursor")}},false);return a};q.wheel=function(){function e(){d=
null}function h(k){var r=k.wheelDelta||-k.detail,w;if(r)if(f){try{m.scrollTop=1E3;m.dispatchEvent(k);r=1E3-m.scrollTop}catch(z){}r*=0.0050}else{w=Date.now();if(w-i>200){r=r>0?+1:-1;i=w}else r=0}if(r)switch(c){case "mouse":w=l.mouse(k);d||(d=l.pointLocation(w));l.off("move",e).zoomBy(r,w,d).on("move",e);break;case "location":l.zoomBy(r,l.locationPoint(d),d);break;default:l.zoomBy(r);break}k.preventDefault();return false}var a={},i=0,f=true,c="mouse",d,l,s,o=document.createElement("div"),m=document.createElement("div");
m.style.visibility="hidden";m.style.top="0px";m.style.height="0px";m.style.width="0px";m.style.overflowY="scroll";o.style.height="2000px";m.appendChild(o);document.body.appendChild(m);a.smooth=function(k){if(!arguments.length)return f;f=k;return a};a.zoom=function(k,r){if(!arguments.length)return c;c=k;d=r;if(l)c=="mouse"?l.on("move",e):l.off("move",e);return a};a.map=function(k){if(!arguments.length)return l;if(l){s.removeEventListener("mousemove",e,false);s.removeEventListener("mousewheel",h,false);
s.removeEventListener("MozMousePixelScroll",h,false);s=null;l.off("move",e)}if(l=k){c=="mouse"&&l.on("move",e);s=l.container();s.addEventListener("mousemove",e,false);s.addEventListener("mousewheel",h,false);s.addEventListener("MozMousePixelScroll",h,false)}return a};return a};q.arrow=function(){function e(w){if(!(w.ctrlKey||w.altKey||w.metaKey)){var z=Date.now(),E=0,G=0;switch(w.keyCode){case 37:if(!c.left){d=z;c.left=1;c.right||(E=m)}break;case 39:if(!c.right){d=z;c.right=1;c.left||(E=-m)}break;
case 38:if(!c.up){d=z;c.up=1;c.down||(G=m)}break;case 40:if(!c.down){d=z;c.down=1;c.up||(G=-m)}break;default:return}if(E||G)k.panBy({x:E,y:G});if(!l&&c.left|c.right|c.up|c.down)l=setInterval(i,o);w.preventDefault()}}function h(w){d=Date.now();switch(w.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;default:return}if(l&&!(c.left|c.right|c.up|c.down))l=clearInterval(l);w.preventDefault()}function a(w){switch(w.charCode){case 45:case 95:k.zoom(Math.ceil(k.zoom())-
1);break;case 43:case 61:k.zoom(Math.floor(k.zoom())+1);break;default:return}w.preventDefault()}function i(){if(k)if(!(Date.now()<d+s)){var w=(c.left-c.right)*m,z=(c.up-c.down)*m;if(w||z)k.panBy({x:w,y:z})}}var f={},c={left:0,right:0,up:0,down:0},d=0,l,s=250,o=50,m=16,k,r;f.map=function(w){if(!arguments.length)return k;if(k){r.removeEventListener("keypress",a,false);r.removeEventListener("keydown",e,false);r.removeEventListener("keyup",h,false);r=null}if(k=w){r=k.focusableParent();r.addEventListener("keypress",
a,false);r.addEventListener("keydown",e,false);r.addEventListener("keyup",h,false)}return f};f.speed=function(w){if(!arguments.length)return m;m=w;return f};return f};q.hash=function(){function e(){var l=d(f);if(i!==l)location.replace(i=l)}function h(){if(location.hash!==i)if(c(f,(i=location.hash).substring(1)))e()}var a={},i,f,c=function(l,s){var o=s.split("/").map(Number);if(o.length<3||o.some(isNaN))return true;else{var m=l.size();l.zoomBy(o[0]-l.zoom(),{x:m.x/2,y:m.y/2},{lat:Math.min(89.99999999,
Math.max(-89.99999999,o[1])),lon:o[2]})}},d=function(l){var s=l.center();l=l.zoom();var o=Math.max(0,Math.ceil(Math.log(l)/Math.LN2));return"#"+l.toFixed(2)+"/"+s.lat.toFixed(o)+"/"+s.lon.toFixed(o)};a.map=function(l){if(!arguments.length)return f;if(f){f.off("move",e);window.removeEventListener("hashchange",h,false)}if(f=l){f.on("move",e);window.addEventListener("hashchange",h,false);location.hash?h():e()}return a};a.parser=function(l){if(!arguments.length)return c;c=l;return a};a.formatter=function(l){if(!arguments.length)return d;
d=l;return a};return a};q.touch=function(){function e(o){var m=-1,k=o.touches.length,r=Date.now();if(k==1&&r-c<300){var w=a.zoom();a.zoomBy(1-w+Math.floor(w),a.mouse(o.touches[0]));o.preventDefault()}c=r;d=a.zoom();for(l=a.angle();++m<k;){r=o.touches[m];s[r.identifier]=a.pointLocation(a.mouse(r))}}var h={},a,i,f=false,c=0,d,l,s={};window.addEventListener("touchmove",function(o){switch(o.touches.length){case 1:var m=o.touches[0];a.zoomBy(0,a.mouse(m),s[m.identifier]);o.preventDefault();break;case 2:m=
o.touches[0];var k=o.touches[1],r=a.mouse(m),w=a.mouse(k);r={x:(r.x+w.x)/2,y:(r.y+w.y)/2};m=q.map.locationCoordinate(s[m.identifier]);k=q.map.locationCoordinate(s[k.identifier]);k=q.map.coordinateLocation({row:(m.row+k.row)/2,column:(m.column+k.column)/2,zoom:0});a.zoomBy(Math.log(o.scale)/Math.LN2+d-a.zoom(),r,k);f&&a.angle(o.rotation/180*Math.PI+l);o.preventDefault();break}},false);h.rotate=function(o){if(!arguments.length)return f;f=o;return h};h.map=function(o){if(!arguments.length)return a;if(a){i.removeEventListener("touchstart",
e,false);i=null}if(a=o){i=a.container();i.addEventListener("touchstart",e,false)}return h};return h};q.interact=function(){var e={},h=q.drag(),a=q.wheel(),i=q.dblclick(),f=q.touch(),c=q.arrow();e.map=function(d){h.map(d);a.map(d);i.map(d);f.map(d);c.map(d);return e};return e};q.compass=function(){function e(B){C.setAttribute("class","compass active");K||(K=setInterval(h,v));U&&J.panBy(U);A=Date.now();return m(B)}function h(){U&&Date.now()>A+j&&J.panBy(U)}function a(B){if(B.shiftKey){H={x0:J.mouse(B)};
J.focusableParent().focus();return m(B)}}function i(B){if(H){H.x1=J.mouse(B);P.setAttribute("x",Math.min(H.x0.x,H.x1.x));P.setAttribute("y",Math.min(H.x0.y,H.x1.y));P.setAttribute("width",Math.abs(H.x0.x-H.x1.x));P.setAttribute("height",Math.abs(H.x0.y-H.x1.y));P.removeAttribute("display")}}function f(){C.setAttribute("class","compass");if(H){if(H.x1){J.extent([J.pointLocation({x:Math.min(H.x0.x,H.x1.x),y:Math.max(H.x0.y,H.x1.y)}),J.pointLocation({x:Math.max(H.x0.x,H.x1.x),y:Math.min(H.x0.y,H.x1.y)})]);
P.setAttribute("display","none")}H=null}if(K){clearInterval(K);K=0}}function c(B){return function(){B?this.setAttribute("class","active"):this.removeAttribute("class");U=B}}function d(B){return function(F){C.setAttribute("class","compass active");var I=J.zoom();J.zoom(B<0?Math.ceil(I)-1:Math.floor(I)+1);return m(F)}}function l(B){return function(F){J.zoom(B);return m(F)}}function s(){this.setAttribute("class","active")}function o(){this.removeAttribute("class")}function m(B){B.stopPropagation();B.preventDefault();
return false}function k(B){var F=Math.SQRT1_2*n,I=n*0.7,M=n*0.2,O=q.svg("g"),R=O.appendChild(q.svg("path")),S=O.appendChild(q.svg("path"));R.setAttribute("class","direction");R.setAttribute("pointer-events","all");R.setAttribute("d","M0,0L"+F+","+F+"A"+n+","+n+" 0 0,1 "+-F+","+F+"Z");S.setAttribute("class","chevron");S.setAttribute("d","M"+M+","+(I-M)+"L0,"+I+" "+-M+","+(I-M));S.setAttribute("pointer-events","none");O.addEventListener("mousedown",e,false);O.addEventListener("mouseover",c(B),false);
O.addEventListener("mouseout",c(null),false);O.addEventListener("dblclick",m,false);return O}function r(B){var F=n*0.4,I=F/2,M=q.svg("g"),O=M.appendChild(q.svg("path")),R=M.appendChild(q.svg("path")),S=M.appendChild(q.svg("path")),Z=M.appendChild(q.svg("path"));O.setAttribute("class","back");O.setAttribute("d","M"+-F+",0V"+-F+"A"+F+","+F+" 0 1,1 "+F+","+-F+"V0Z");R.setAttribute("class","direction");R.setAttribute("d",O.getAttribute("d"));S.setAttribute("class","chevron");S.setAttribute("d","M"+-I+
","+-F+"H"+I+(B>0?"M0,"+(-F-I)+"V"+-I:""));Z.setAttribute("class","fore");Z.setAttribute("fill","none");Z.setAttribute("d",O.getAttribute("d"));M.addEventListener("mousedown",d(B),false);M.addEventListener("mouseover",s,false);M.addEventListener("mouseout",o,false);M.addEventListener("dblclick",m,false);return M}function w(B){var F=n*0.2,I=n*0.4,M=q.svg("g"),O=M.appendChild(q.svg("rect")),R=M.appendChild(q.svg("path"));O.setAttribute("pointer-events","all");O.setAttribute("fill","none");O.setAttribute("x",
-I);O.setAttribute("y",-0.75*I);O.setAttribute("width",2*I);O.setAttribute("height",1.5*I);R.setAttribute("class","chevron");R.setAttribute("d","M"+-F+",0H"+F);M.addEventListener("mousedown",l(B),false);M.addEventListener("dblclick",m,false);return M}function z(){var B=n+6,F=B,I=J.size();switch(u){case "top-left":break;case "top-right":B=I.x-B;break;case "bottom-left":F=I.y-F;break;case "bottom-right":B=I.x-B;F=I.y-F;break}C.setAttribute("transform","translate("+B+","+F+")");P.setAttribute("transform",
"translate("+-B+","+-F+")");for(var M in L)M==J.zoom()?L[M].setAttribute("class","active"):L[M].removeAttribute("class")}function E(){for(;C.lastChild;)C.removeChild(C.lastChild);C.appendChild(P);if(N!="none"){Q=C.appendChild(q.svg("g"));Q.setAttribute("class","pan");var B=Q.appendChild(q.svg("circle"));B.setAttribute("class","back");B.setAttribute("r",n);Q.appendChild(k({x:0,y:-t})).setAttribute("transform","rotate(0)");Q.appendChild(k({x:t,y:0})).setAttribute("transform","rotate(90)");Q.appendChild(k({x:0,
y:t})).setAttribute("transform","rotate(180)");Q.appendChild(k({x:-t,y:0})).setAttribute("transform","rotate(270)");B=Q.appendChild(q.svg("circle"));B.setAttribute("fill","none");B.setAttribute("class","fore");B.setAttribute("r",n)}else Q=null;if(D!="none"){x=C.appendChild(q.svg("g"));x.setAttribute("class","zoom");B=-0.5;if(D=="big"){L={};var F=J.zoomRange()[0];for(B=0;F<=J.zoomRange()[1];F++,B++)(L[F]=x.appendChild(w(F))).setAttribute("transform","translate(0,"+-(B+0.75)*n*0.4+")")}F=N=="none"?
0.4:2;x.setAttribute("transform","translate(0,"+n*(/^top-/.test(u)?F+(B+0.5)*0.4:-F)+")");x.appendChild(r(+1)).setAttribute("transform","translate(0,"+-(B+0.5)*n*0.4+")");x.appendChild(r(-1)).setAttribute("transform","scale(-1)")}else x=null;z()}var G={},C=q.svg("g"),L={},n=30,t=16,A=0,j=250,v=50,u="top-left",D="small",x,N="small",K,U,Q,H,P=q.svg("rect"),J,V,W;C.setAttribute("class","compass");P.setAttribute("class","back fore");P.setAttribute("pointer-events","none");P.setAttribute("display","none");
G.radius=function(B){if(!arguments.length)return n;n=B;J&&E();return G};G.speed=function(B){if(!arguments.length)return n;t=B;return G};G.position=function(B){if(!arguments.length)return u;u=B;J&&E();return G};G.pan=function(B){if(!arguments.length)return N;N=B;J&&E();return G};G.zoom=function(B){if(!arguments.length)return D;D=B;J&&E();return G};G.map=function(B){if(!arguments.length)return J;if(J){V.removeEventListener("mousedown",a,false);V.removeChild(C);V=null;W.removeEventListener("mousemove",
i,false);W.removeEventListener("mouseup",f,false);W=null;J.off("move",z).off("resize",z)}if(J=B){V=J.container();V.appendChild(C);V.addEventListener("mousedown",a,false);W=V.ownerDocument.defaultView;W.addEventListener("mousemove",i,false);W.addEventListener("mouseup",f,false);J.on("move",z).on("resize",z);E()}return G};return G};q.grid=function(){function e(){var f=i.firstChild,c=a.size(),d=a.pointLocation($);a.pointLocation(c);var l=Math.pow(2,4-Math.round(a.zoom()));d.lat=Math.floor(d.lat/l)*l;
d.lon=Math.ceil(d.lon/l)*l;for(var s;(s=a.locationPoint(d).x)<=c.x;d.lon+=l){f||(f=i.appendChild(q.svg("line")));f.setAttribute("x1",s);f.setAttribute("x2",s);f.setAttribute("y1",0);f.setAttribute("y2",c.y);f=f.nextSibling}for(;(s=a.locationPoint(d).y)<=c.y;d.lat-=l){f||(f=i.appendChild(q.svg("line")));f.setAttribute("y1",s);f.setAttribute("y2",s);f.setAttribute("x1",0);f.setAttribute("x2",c.x);f=f.nextSibling}for(;f;){c=f.nextSibling;i.removeChild(f);f=c}}var h={},a,i=q.svg("g");i.setAttribute("class",
"grid");h.map=function(f){if(!arguments.length)return a;if(a){i.parentNode.removeChild(i);a.off("move",e).off("resize",e)}if(a=f){a.on("move",e).on("resize",e);a.container().appendChild(i);a.dispatch({type:"move"})}return h};return h};q.stylist=function(){function e(f){var c=f.features.length,d=h.length,l=a.length,s,o,m,k,r,w;for(r=0;r<c;++r)if(o=(s=f.features[r]).element){s=s.data;for(w=0;w<d;++w){k=(m=h[w]).value;if(typeof k==="function")k=k.call(null,s);k==null?m.name.local?o.removeAttributeNS(m.name.space,
m.name.local):o.removeAttribute(m.name):m.name.local?o.setAttributeNS(m.name.space,m.name.local,k):o.setAttribute(m.name,k)}for(w=0;w<l;++w){k=(m=a[w]).value;if(typeof k==="function")k=k.call(null,s);k==null?o.style.removeProperty(m.name):o.style.setProperty(m.name,k,m.priority)}if(k=i){if(typeof k==="function")k=k.call(null,s);for(;o.lastChild;)o.removeChild(o.lastChild);k!=null&&o.appendChild(q.svg("title")).appendChild(document.createTextNode(k))}}}var h=[],a=[],i;e.attr=function(f,c){h.push({name:ga(f),
value:c});return e};e.style=function(f,c,d){a.push({name:f,value:c,priority:arguments.length<3?null:d});return e};e.title=function(f){i=f;return e};return e}})(org.polymaps);
